version: 2

models:
  - name: stg_coverage
    description: This table contains one record each span of health insurance eligibility per patient.

    columns:
      - name: patient_id
        description: This is a unique identifier for each patient
        tests:
          - not_null
          - relationships:
              to: ref('stg_patient')
              field: patient_id

      - name: coverage_start_date
        description: The beginning date for the patient's coverage period.
        tests:
          - not_null

      - name: coverage_end_date
        description: The ending date for the patient's coverage period.
        tests:
          - not_null

      - name: primary_payer
        description: The primary payer the patient has health insurance through.
        tests:
          - not_null

      - name: payer_type
        description: The type of payer for the primary payer (e.g. Medicare, Medicaid, Commercial)
        tests:
          - not_null